import { addToCallbacks, ready } from "../src/mod.ready.js";

describe("Ready tests", () => {
  it("should add callbacks to queue and then call them", (done) => {
    const mockA = jest.fn();
    const mockB = jest.fn();
    const mockC = jest.fn();
    const mockD = jest.fn();
    addToCallbacks([mockA, mockB, mockC]);
    ready(mockD);
    ready();
    expect(mockA).toHaveBeenCalledTimes(1);
    expect(mockB).toHaveBeenCalledTimes(1);
    expect(mockC).toHaveBeenCalledTimes(1);
    expect(mockD).toHaveBeenCalledTimes(1);
    done();
  });
});
