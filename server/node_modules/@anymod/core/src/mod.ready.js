import utils from "./utils.js";

const callbacks = [];

const addToCallbacks = (arr) => {
  if (!arr || arr.length < 1) return;
  arr.map((cb) => callbacks.push(cb));
};

const executeCallbacks = () => {
  while (callbacks.length > 0) {
    let callback = callbacks.shift();
    if (callback && typeof callback === "function") callback();
  }
};

/**
 * Executes any existing callbacks, then calls cb if present
 * @param {Function} cb
 */
const ready = (cb) => {
  utils.debugLog(["ready() callback"]);
  callbacks.push(cb);
  executeCallbacks();
};

export { addToCallbacks, executeCallbacks, ready };
