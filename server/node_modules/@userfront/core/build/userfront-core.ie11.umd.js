!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).core=t()}(this,function(){function e(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}e.prototype=Error.prototype;var t=setTimeout;function r(e){return Boolean(e&&void 0!==e.length)}function n(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void s(t.promise,e)}i(t.promise,n)}else(1===e._state?i:s)(t.promise,e._value)})):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof r)return void f((n=r,a=t,function(){n.apply(a,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){s(e,t)}var n,a}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function f(e,t){var r=!1;try{e(function(e){r||(r=!0,i(t,e))},function(e){r||(r=!0,s(t,e))})}catch(e){if(r)return;r=!0,s(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var r=new this.constructor(n);return a(this,new u(e,t,r)),r},o.prototype.finally=function(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})},o.all=function(e){return new o(function(t,n){if(!r(e))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var a=o.length;function i(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(t){i(e,t)},n)}o[e]=r,0==--a&&t(o)}catch(e){n(e)}}for(var s=0;s<o.length;s++)i(s,o[s])})},o.any=function(t){var r=this;return new r(function(n,o){if(!t||void 0===t.length)return o(new TypeError("Promise.any accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return o();for(var i=[],s=0;s<a.length;s++)try{r.resolve(a[s]).then(n).catch(function(t){i.push(t),i.length===a.length&&o(new e(i,"All promises were rejected"))})}catch(e){o(e)}})},o.allSettled=function(e){return new this(function(t,r){if(!e||void 0===e.length)return r(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var o=n.length;function a(e,r){if(r&&("object"==typeof r||"function"==typeof r)){var i=r.then;if("function"==typeof i)return void i.call(r,function(t){a(e,t)},function(r){n[e]={status:"rejected",reason:r},0==--o&&t(n)})}n[e]={status:"fulfilled",value:r},0==--o&&t(n)}for(var i=0;i<n.length;i++)a(i,n[i])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,r){r(e)})},o.race=function(e){return new o(function(t,n){if(!r(e))return n(new TypeError("Promise.race accepts an array"));for(var a=0,i=e.length;a<i;a++)o.resolve(e[a]).then(t,n)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var d=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},l=Object.prototype.toString;function h(e){return"[object Array]"===l.call(e)}function p(e){return void 0===e}function v(e){return null!==e&&"object"==typeof e}function m(e){if("[object Object]"!==l.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function w(e){return"[object Function]"===l.call(e)}function g(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),h(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var y={isArray:h,isArrayBuffer:function(e){return"[object ArrayBuffer]"===l.call(e)},isBuffer:function(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:v,isPlainObject:m,isUndefined:p,isDate:function(e){return"[object Date]"===l.call(e)},isFile:function(e){return"[object File]"===l.call(e)},isBlob:function(e){return"[object Blob]"===l.call(e)},isFunction:w,isStream:function(e){return v(e)&&w(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:g,merge:function e(){var t={};function r(r,n){t[n]=m(t[n])&&m(r)?e(t[n],r):m(r)?e({},r):h(r)?r.slice():r}for(var n=0,o=arguments.length;n<o;n++)g(arguments[n],r);return t},extend:function(e,t,r){return g(t,function(t,n){e[n]=r&&"function"==typeof t?d(t,r):t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function k(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var b=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(y.isURLSearchParams(t))n=t.toString();else{var o=[];y.forEach(t,function(e,t){null!=e&&(y.isArray(e)?t+="[]":e=[e],y.forEach(e,function(e){y.isDate(e)?e=e.toISOString():y.isObject(e)&&(e=JSON.stringify(e)),o.push(k(t)+"="+k(e))}))}),n=o.join("&")}if(n){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e};function E(){this.handlers=[]}E.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},E.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},E.prototype.forEach=function(e){y.forEach(this.handlers,function(t){null!==t&&e(t)})};var j=E,T=function(e,t){y.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})},C=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},x=function(e,t,r,n,o){var a=new Error(e);return C(a,t,r,n,o)},I=y.isStandardBrowserEnv()?{write:function(e,t,r,n,o,a){var i=[];i.push(e+"="+encodeURIComponent(t)),y.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),y.isString(n)&&i.push("path="+n),y.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},P=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],S=y.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=y.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},O={"Content-Type":"application/x-www-form-urlencoded"};function U(e,t){!y.isUndefined(e)&&y.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var N,_={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(N=function(e){return new o(function(t,r){var n=e.data,o=e.headers,a=e.responseType;y.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+c)}var u,f,d=(f=e.url,(u=e.baseURL)&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(f)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,f):f);function l(){if(i){var n,o,s,c,u,f="getAllResponseHeaders"in i?(n=i.getAllResponseHeaders(),u={},n?(y.forEach(n.split("\n"),function(e){if(c=e.indexOf(":"),o=y.trim(e.substr(0,c)).toLowerCase(),s=y.trim(e.substr(c+1)),o){if(u[o]&&P.indexOf(o)>=0)return;u[o]="set-cookie"===o?(u[o]?u[o]:[]).concat([s]):u[o]?u[o]+", "+s:s}}),u):u):null;!function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(x("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}(t,r,{data:a&&"text"!==a&&"json"!==a?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:f,config:e,request:i}),i=null}}if(i.open(e.method.toUpperCase(),b(d,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,"onloadend"in i?i.onloadend=l:i.onreadystatechange=function(){i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))&&setTimeout(l)},i.onabort=function(){i&&(r(x("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(x("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(x(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",i)),i=null},y.isStandardBrowserEnv()){var h=(e.withCredentials||S(d))&&e.xsrfCookieName?I.read(e.xsrfCookieName):void 0;h&&(o[e.xsrfHeaderName]=h)}"setRequestHeader"in i&&y.forEach(o,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)}),y.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),a&&"json"!==a&&(i.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){i&&(i.abort(),r(e),i=null)}),n||(n=null),i.send(n)})}),N),transformRequest:[function(e,t){return T(t,"Accept"),T(t,"Content-Type"),y.isFormData(e)||y.isArrayBuffer(e)||y.isBuffer(e)||y.isStream(e)||y.isFile(e)||y.isBlob(e)?e:y.isArrayBufferView(e)?e.buffer:y.isURLSearchParams(e)?(U(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):y.isObject(e)||t&&"application/json"===t["Content-Type"]?(U(t,"application/json"),function(e,t,r){if(y.isString(e))try{return(0,JSON.parse)(e),y.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=!(t&&t.silentJSONParsing)&&"json"===this.responseType;if(r||t&&t.forcedJSONParsing&&y.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw C(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};y.forEach(["delete","get","head"],function(e){_.headers[e]={}}),y.forEach(["post","put","patch"],function(e){_.headers[e]=y.merge(O)});var R=_,A=function(e,t,r){var n=this||R;return y.forEach(r,function(r){e=r.call(n,e,t)}),e},F=function(e){return!(!e||!e.__CANCEL__)};function B(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var L=function(e){return B(e),e.headers=e.headers||{},e.data=A.call(e,e.data,e.headers,e.transformRequest),e.headers=y.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),y.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||R.adapter)(e).then(function(t){return B(e),t.data=A.call(e,t.data,t.headers,e.transformResponse),t},function(t){return F(t)||(B(e),t&&t.response&&(t.response.data=A.call(e,t.response.data,t.response.headers,e.transformResponse))),o.reject(t)})},z=function(e,t){t=t||{};var r={},n=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function s(e,t){return y.isPlainObject(e)&&y.isPlainObject(t)?y.merge(e,t):y.isPlainObject(t)?y.merge({},t):y.isArray(t)?t.slice():t}function c(n){y.isUndefined(t[n])?y.isUndefined(e[n])||(r[n]=s(void 0,e[n])):r[n]=s(e[n],t[n])}y.forEach(n,function(e){y.isUndefined(t[e])||(r[e]=s(void 0,t[e]))}),y.forEach(o,c),y.forEach(a,function(n){y.isUndefined(t[n])?y.isUndefined(e[n])||(r[n]=s(void 0,e[n])):r[n]=s(void 0,t[n])}),y.forEach(i,function(n){n in t?r[n]=s(e[n],t[n]):n in e&&(r[n]=s(void 0,e[n]))});var u=n.concat(o).concat(a).concat(i),f=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===u.indexOf(e)});return y.forEach(f,c),r},D={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]},q={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){q[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var M={},J=D.version.split(".");function H(e,t){for(var r=t?t.split("."):J,n=e.split("."),o=0;o<3;o++){if(r[o]>n[o])return!0;if(r[o]<n[o])return!1}return!1}q.transitional=function(e,t,r){var n=t&&H(t);function o(e,t){return"[Axios v"+D.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,a,i){if(!1===e)throw new Error(o(a," has been removed in "+t));return n&&!M[a]&&(M[a]=!0,console.warn(o(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,i)}};var K={isOlderVersion:H,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-- >0;){var a=n[o],i=t[a];if(i){var s=e[a],c=void 0===s||i(s,a,e);if(!0!==c)throw new TypeError("option "+a+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+a)}},validators:q},W=K.validators;function V(e){this.defaults=e,this.interceptors={request:new j,response:new j}}V.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=z(this.defaults,e)).method=e.method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var t=e.transitional;void 0!==t&&K.assertOptions(t,{silentJSONParsing:W.transitional(W.boolean,"1.0.0"),forcedJSONParsing:W.transitional(W.boolean,"1.0.0"),clarifyTimeoutError:W.transitional(W.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach(function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,r.unshift(t.fulfilled,t.rejected))});var a,i=[];if(this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)}),!n){var s=[L,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(i),a=o.resolve(e);s.length;)a=a.then(s.shift(),s.shift());return a}for(var c=e;r.length;){var u=r.shift(),f=r.shift();try{c=u(c)}catch(e){f(e);break}}try{a=L(c)}catch(e){return o.reject(e)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},V.prototype.getUri=function(e){return e=z(this.defaults,e),b(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},y.forEach(["delete","get","head","options"],function(e){V.prototype[e]=function(t,r){return this.request(z(r||{},{method:e,url:t,data:(r||{}).data}))}}),y.forEach(["post","put","patch"],function(e){V.prototype[e]=function(t,r,n){return this.request(z(n||{},{method:e,url:t,data:r}))}});var X=V;function $(e){this.message=e}$.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},$.prototype.__CANCEL__=!0;var G=$;function Z(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new o(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new G(e),t(r.reason))})}Z.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Z.source=function(){var e;return{token:new Z(function(t){e=t}),cancel:e}};var Q=Z;function Y(e){var t=new X(e),r=d(X.prototype.request,t);return y.extend(r,X.prototype,t),y.extend(r,t),r}var ee=Y(R);ee.Axios=X,ee.create=function(e){return Y(z(ee.defaults,e))},ee.Cancel=G,ee.CancelToken=Q,ee.isCancel=F,ee.all=function(e){return o.all(e)},ee.spread=function(e){return function(t){return e.apply(null,t)}},ee.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var te=ee;te.default=ee;var re=te,ne={user:{},tokens:{},mode:"live"},oe=function(e){var t={exports:{}};return function(e,t){var r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function a(t,r,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var i=JSON.stringify(r);/^[\{\[]/.test(i)&&(r=i)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,!0!==a[c]&&(s+="="+a[c].split(";")[0]));return document.cookie=t+"="+r+s}}function i(e,r){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],i=0;i<a.length;i++){var s=a[i].split("="),c=s.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(n.read||n)(c,u)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=a,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(t,r){a(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}(function(){})},e.exports=r()}(t),t.exports}();function ae(e){try{var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(atob(t))}catch(e){console.error("Problem decoding JWT payload",e)}}function ie(e){try{if(!e)return!1;var t=ae(e);return new Date(1e3*t.exp)>new Date}catch(e){return!1}}function se(e){var t,r;if(e){if("string"==typeof e)throw new Error(e);if(null!=e&&null!=(t=e.response)&&null!=(r=t.data)&&r.message)throw new Error(e.response.data.message);throw e}}function ce(){return"undefined"!=typeof window}var ue=ne.user;function fe(e){return e.replace(/([^:]\/)\/+/g,"$1")}var de=function(e,t,r){try{var n=fe(""+ne.baseUrl+e);return o.resolve(re.put(n,t,r))}catch(e){return o.reject(e)}},le=function(e,t,r){try{var n=fe(""+ne.baseUrl+e);return o.resolve(re.post(n,t,r))}catch(e){return o.reject(e)}},he=function(e,t){try{var r=fe(""+ne.baseUrl+e);return o.resolve(re.get(r,t))}catch(e){return o.reject(e)}};function pe(e,t,r){var n=r+"."+ne.tenantId;t=t||{secure:"live"===ne.mode,sameSite:"Lax"},"refresh"===r&&(t.sameSite="Strict"),oe.set(n,e,t)}function ve(e){var t,r;try{var n=window.location.pathname,o=window.location.hostname,a=o.split(".").slice(-2).join(".");t=[void 0,n,"/"],r=[void 0,o,"."+o,a,"."+a]}catch(e){t=[void 0,"/"],r=[void 0]}t.map(function(t){r.map(function(r){var n={};r&&(n.domain=r),t&&(n.path=t),oe.remove(e,n)})})}function me(){ve(ne.tokens.accessTokenName),ve(ne.tokens.idTokenName),ve(ne.tokens.refreshTokenName),ne.tokens.accessToken=void 0,ne.tokens.idToken=void 0,ne.tokens.refreshToken=void 0,function(){for(var e in ne.user)"function"!=typeof ne.user[e]&&delete ne.user[e]}()}function we(e){pe(e.access.value,e.access.cookieOptions,"access"),pe(e.id.value,e.id.cookieOptions,"id"),e.refresh&&e.refresh.value&&pe(e.refresh.value,e.refresh.cookieOptions,"refresh"),be()}function ge(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var ye=function(e){return o.resolve()},ke=function(){try{var e=ge(function(){return o.resolve(function(){try{var e=oe.get(ne.tokens.refreshTokenName);return o.resolve(ge(function(){return o.resolve(he("/auth/refresh",{headers:{authorization:"Bearer "+e}})).then(function(e){var t=e.data;if(200!==e.status)throw new Error(t.message||"Problem with request");if(t.tokens)return we(t.tokens),t;throw new Error("Problem setting cookies")})},function(e){se(e)}))}catch(e){return o.reject(e)}}()).then(function(){})},function(e){console.warn("Refresh failed: "+e.message)});return o.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return o.reject(e)}};function be(){["access","id","refresh"].map(function(e){try{var t=oe.get(ne.tokens[e+"TokenName"]);ne.tokens[e+"Token"]=t,"id"===e&&t&&function(){if(!ne.tokens.idToken)return console.warn("Cannot define user: missing ID token");ne.user=ne.user||{};for(var e=ae(ne.tokens.idToken),t=0,r=["email","phoneNumber","username","name","image","data","confirmedAt","createdAt","updatedAt","mode","userId","userUuid","tenantId","isConfirmed"];t<r.length;t++){var n=r[t];if("update"===n)return;ne.user[n]=e[n]}}()}catch(t){console.warn("Problem setting "+e+" token.")}})}function Ee(){return ie(ne.tokens.accessToken)}ne.tokens=ne.tokens||{},ne.tokens.refresh=ke;var je=ne.tokens,Te={firstFactors:[],secondFactors:[],firstFactorToken:null};function Ce(){return!!Te.firstFactorToken}function xe(e){e.isMfaRequired?(Te.secondFactors=e.authentication.secondFactors,Te.firstFactorToken=e.firstFactorToken):"OK"===e.message&&Pe()}function Ie(){return Te.firstFactorToken?{authorization:"Bearer "+Te.firstFactorToken}:{}}function Pe(){Te.secondFactors=[],Te.firstFactorToken=null}var Se=function(){try{return o.resolve(Oe()).then(function(e){return{isLoggedIn:e,needsSecondFactor:Ce(),firstFactors:Te.firstFactors,secondFactors:Te.secondFactors,resetMfaState:Pe}})}catch(e){return o.reject(e)}},Oe=function(){return o.resolve(function(e,t){try{var r=!!Ee()||!!ie(ne.tokens.refreshToken)&&o.resolve(ke()).then(function(){return Ee()})}catch(e){return!1}return r&&r.then?r.then(void 0,function(){return!1}):r}())},Ue={codeChallenge:"",get usePkce(){return!!Ue.codeChallenge}};function Ne(){ce()&&(window.localStorage.removeItem("uf_pkce_code_challenge"),window.localStorage.removeItem("uf_pkce_code_challenge_expiresAt"))}function _e(){if(ce()){var e=Fe("code_challenge");if(e)return Ue.codeChallenge=e,function(e){if(ce()){if(!e)return Ne();Ue.codeChallenge=e;var t=Date.now()+3e5;try{window.localStorage.setItem("uf_pkce_code_challenge",e),window.localStorage.setItem("uf_pkce_code_challenge_expiresAt",t)}catch(e){}}}(e),!0;var t=function(){if(ce()){var e=window.localStorage.getItem("uf_pkce_code_challenge");if(e){var t=window.localStorage.getItem("uf_pkce_code_challenge_expiresAt");if(t&&parseInt(t,10)>Date.now())return e}}}();return t?(Ue.codeChallenge=t,!0):(Ne(),!1)}}function Re(){return Ue.usePkce?{code_challenge:Ue.codeChallenge}:{}}function Ae(e,t){if(e&&t){Ue.usePkce||console.warn("Redirecting with a PKCE authorization code, but no PKCE challenge code is present in the client. This is unexpected.");var r=new URL(e);r.searchParams.set("authorization_code",t),Ne(),window.location.assign(r.href)}}function Fe(e){if("object"==typeof window&&"object"==typeof window.location&&window.location.href&&!(window.location.href.indexOf(e+"=")<0))return decodeURIComponent(window.location.href.split(e+"=")[1].split("&")[0])}var Be=function(e){var t=e.redirect,r=e.data;!1!==t&&Le(t||Fe("redirect")||r.redirectTo||"/")};function Le(e){if(e&&"object"==typeof document&&"object"==typeof window){try{document&&window}catch(e){return}var t=document.createElement("a");t.href=e,t.pathname!==window.location.pathname&&window.location.assign(""+t.pathname+t.hash+t.search)}}function ze(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var De=function(e){var t=e.password,r=e.existingPassword;try{return o.resolve(ze(function(){if(!ne.tokens.accessToken)throw new Error('updatePassword({ method: "jwt" }) was called without a JWT access token.');return o.resolve(de("/auth/basic",{tenantId:ne.tenantId,password:t,existingPassword:r},{headers:{Authorization:"Bearer "+ne.tokens.accessToken}})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},qe=function(e){var t=e.uuid,r=e.token,n=e.password,a=e.redirect;try{return o.resolve(ze(function(){if(r=r||Fe("token"),t=t||Fe("uuid"),!r||!t)throw new Error("Missing token or uuid");return o.resolve(de("/auth/reset",{tenantId:ne.tenantId,uuid:t,token:r,password:n})).then(function(e){var t=e.data;if(t.tokens)return we(t.tokens),Be({redirect:a,data:t}),t;throw new Error("There was a problem resetting your password. Please try again.")})},function(e){se(e)}))}catch(e){return o.reject(e)}},Me=function(e){var t=e.method,r=e.password,n=e.existingPassword,a=e.uuid,i=e.token,s=e.redirect;try{switch(t){case"link":return qe({uuid:a,token:i,password:r,redirect:s});case"jwt":return De({password:r,existingPassword:n});default:if(i=i||Fe("token"),(a=a||Fe("uuid"))&&i)return qe({uuid:a,token:i,password:r,redirect:s});if(ne.tokens.accessToken)return De({password:r,existingPassword:n});throw new Error("updatePassword() was called without link credentials (token & uuid) or a JWT access token.")}}catch(e){return o.reject(e)}},Je=Me;function He(e){var t=e.provider,r=e.redirect;if(!t)throw new Error("Missing provider");var n=function(e){var t=e.provider,r=e.redirect;if(!t)throw new Error("Missing provider");if(!ne.tenantId)throw new Error("Missing tenantId");var n=ne.baseUrl+"auth/"+t+"/login?tenant_id="+ne.tenantId+"&origin="+window.location.origin,o=r||Fe("redirect");return!1===r&&(o="object"==typeof document&&document.location.pathname),o&&(n+="&redirect="+encodeURIComponent(o)),n}({provider:t,redirect:r});window.location.assign(n)}function Ke(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var We=function(e){var t=e.email,r=e.name,n=e.username,a=e.userData,i=e.options;try{return o.resolve(Ke(function(){return o.resolve(le("/auth/link",{email:t,name:r,username:n,data:a,options:i,tenantId:ne.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}};function Ve(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function Xe(e){var t=e.channel,r=e.phoneNumber,n=e.email;if("sms"!==t&&"email"!==t)throw new Error("Invalid channel");if("sms"===t&&!r)throw new Error('SMS verification code requires "phoneNumber"');if("email"===t&&!n)throw new Error('Email verification code requires "email"')}var $e=function(e){var t=e.channel,r=void 0===t?"sms":t,n=e.phoneNumber,a=e.email,i=e.name,s=e.username,c=e.data;try{return o.resolve(Ve(function(){return Xe({channel:r,phoneNumber:n,email:a}),o.resolve(le("/auth/code",{channel:r,email:a,phoneNumber:n,name:i,username:s,data:c,tenantId:ne.tenantId},{headers:Ie()})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}};function Ge(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function Ze(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}var Qe=/((^127\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^192\.168\.))\d{1,3}\.\d{1,3}/g,Ye=function(){try{return o.resolve(function(e,t){try{var r=o.resolve(he("/tenants/"+ne.tenantId+"/mode")).then(function(e){var t,r=e.data;return et.value=r.mode||"test",et.reason=rt(et.value),ne.mode=et.value,t=r.authentication,ne.tenantId?t&&"object"==typeof t&&Array.isArray(t.firstFactors)?Te.firstFactors=t.firstFactors:console.warn("setFirstFactors: invalid factors passed."):console.warn("setFirstFactors: tried to set factors without a tenantId set."),r})}catch(e){return t()}return r&&r.then?r.then(void 0,t):r}(0,function(){et.value="test",ne.mode=et.value}))}catch(e){return o.reject(e)}},et={value:"live",reason:void 0,setMode:Ye};function tt(){var e=function(e){try{var t=window.location.hostname;return!(!t.match(/localhost/g)&&!t.match(Qe))}catch(e){return!0}}()||!function(){try{return"https:"===window.location.protocol}catch(e){return!1}}()?"test":"live";et.value=e,et.reason=rt(e),ne.mode=e}function rt(e){try{return"live"===e?"domain":"http:"===window.location.protocol?"http":"https:"!==window.location.protocol?"protocol":"domain"}catch(e){}}tt(),ne.user.update=function(e){try{return!e||Object.keys(e).length<1?o.resolve(console.warn("Missing user properties to update")):o.resolve(de("/self",e,{headers:{authorization:"Bearer "+ne.tokens.accessToken}})).then(function(){return o.resolve(ke()).then(function(){return ne.user})})}catch(e){return o.reject(e)}},ne.user.hasRole=function(e,t){var r=(void 0===t?{}:t).tenantId;try{if(!ne.tokens.accessToken||!ne.tenantId)return!1;var n=ae(ne.tokens.accessToken).authorization;return!!n&&!(!n[r=r||ne.tenantId]||!n[r].roles)&&n[r].roles.indexOf(e)>-1}catch(e){return!1}},ne.user.updatePassword=Me,ne.user.getTotp=function(){try{var e;return o.resolve(Ge(function(){function t(t){if(e)return t;if(!ne.tokens.accessToken)throw new Error("getTotp() was called without a JWT access token.");return o.resolve(he("/auth/totp",{headers:{Authorization:"Bearer "+ne.tokens.accessToken}})).then(function(e){return e.data})}var r=function(){if(Ce())return o.resolve(he("/auth/totp",{headers:Ie()})).then(function(t){return e=1,t.data})}();return r&&r.then?r.then(t):t(r)},function(e){se(e)}))}catch(e){return o.reject(e)}};var nt=[],ot=!1,at={addInitCallback:function(e){e&&"function"==typeof e&&nt.push(e)},init:function(e,t){if(void 0===t&&(t={}),!e)return console.warn("Userfront initialized without tenantId");if(ne.tenantId=e,ne.baseUrl=t.baseUrl||"https://api.userfront.com/v0/",ne.baseUrl.endsWith("/")||(ne.baseUrl+="/"),t.domain){ne.domain=t.domain;var r="https://"+ne.domain;re.defaults.headers.common["x-application-id"]=r,re.defaults.headers.common["x-origin"]=r}ne.tokens=ne.tokens||{},ne.tokens.accessTokenName="access."+ne.tenantId,ne.tokens.idTokenName="id."+ne.tenantId,ne.tokens.refreshTokenName="refresh."+ne.tenantId,be(),tt(),Pe(),Te.firstFactors=[];try{nt.length>0&&nt.forEach(function(t){t&&"function"==typeof t&&t({tenantId:e})}),nt=[]}catch(e){}},registerUrlChangedEventListener:function(){if(!ot){ot=!0;try{history.pushState=(e=history.pushState,function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("urlchanged")),t}),history.replaceState=function(e){return function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("urlchanged")),t}}(history.replaceState),window.addEventListener("popstate",function(){window.dispatchEvent(new Event("urlchanged"))})}catch(e){}var e}},logout:function(e){var t=void 0===e?{}:e,r=t.method,n=t.redirect;try{if("saml"===r)return function(){try{if(!ne.tokens.accessToken)throw new Error("Please log in to authorize your logout request.");var e=Ze(function(){return o.resolve(he("/auth/saml/idp/token",{headers:{authorization:"Bearer "+ne.tokens.accessToken}})).then(function(e){window.location.assign(ne.baseUrl+"auth/saml/idp/logout?tenant_id="+ne.tenantId+"&token="+e.data.token+"&uuid="+ne.user.userUuid)})},function(e){se(e)});return o.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return o.reject(e)}}();if(!ne.tokens.accessToken)return o.resolve(me());var a=Ze(function(){return o.resolve(he("/auth/logout",{headers:{authorization:"Bearer "+ne.tokens.accessToken}})).then(function(e){var t=e.data;me(),Be({redirect:n,data:t})})},function(){me()});return o.resolve(a&&a.then?a.then(function(){}):void 0)}catch(e){return o.reject(e)}},mode:et,setMode:Ye,refresh:function(e,t,r){try{console.warn("Userfront.refresh() is deprecated and will be removed. Please use Userfront.tokens.refresh() instead.")}catch(e){}return ke()},login:function(e){var t=void 0===e?{}:e,r=t.method,n=t.userId,a=t.userUuid,i=t.email,s=t.username,c=t.emailOrUsername,u=t.phoneNumber,f=t.password,d=t.token,l=t.uuid,h=t.totpCode,p=t.backupCode,v=t.channel,m=t.verificationCode,w=t.redirect,g=t.options;try{if(!r)throw new Error('Userfront.login called without "method" property.');switch(_e(),r){case"apple":case"azure":case"facebook":case"github":case"google":case"linkedin":return o.resolve(He({provider:r,redirect:w}));case"password":return o.resolve(function(e){var t=e.email,r=e.username,n=e.emailOrUsername,a=e.password,i=e.redirect,s=e.options;try{return o.resolve(ze(function(){var e={tenantId:ne.tenantId,emailOrUsername:t||r||n,password:a};return s&&s.noResetEmail&&(e.options={noResetEmail:!0}),o.resolve(le("/auth/basic",e,{headers:Ie(),params:Re()})).then(function(e){var t,r=e.data;function n(e){if(t)return e;if(r.hasOwnProperty("firstFactorToken"))return xe(r),r;if(r.authorizationCode){var n=i||r.redirectTo;if(n)return void Ae(n,r.authorizationCode)}throw new Error("Please try again.")}var a=function(){if(r.hasOwnProperty("tokens"))return we(r.tokens),o.resolve(ye()).then(function(){return Be({redirect:i,data:r}),t=1,r})}();return a&&a.then?a.then(n):n(a)})},function(e){se(e)}))}catch(e){return o.reject(e)}}({email:i,username:s,emailOrUsername:c,password:f,redirect:w,options:g}));case"passwordless":return o.resolve(We({email:i}));case"link":return o.resolve(function(e){var t=void 0===e?{}:e,r=t.token,n=t.uuid,a=t.redirect;try{return o.resolve(Ke(function(){if(r=r||Fe("token"),n=n||Fe("uuid"),r&&n)return o.resolve(de("/auth/link",{token:r,uuid:n,tenantId:ne.tenantId},{headers:Ie(),params:Re()})).then(function(e){var t,r=e.data;function n(e){if(t)return e;if(r.hasOwnProperty("firstFactorToken"))return xe(r),r;if(r.authorizationCode){var n=a||r.redirectTo;if(n)return void Ae(n,r.authorizationCode);throw new Error("Received a PKCE (mobile auth) response from the server, but no redirect was provided. Please set the redirect to the app that initiated the request.")}throw new Error("Problem logging in.")}var i=function(){if(r.hasOwnProperty("tokens"))return Pe(),we(r.tokens),o.resolve(ye()).then(function(){return Be({redirect:a,data:r}),t=1,r})}();return i&&i.then?i.then(n):n(i)})},function(e){se(e)}))}catch(e){return o.reject(e)}}({token:d,uuid:l,redirect:w}));case"totp":return o.resolve(function(e){var t=void 0===e?{}:e,r=t.totpCode,n=t.backupCode,a=t.userId,i=t.userUuid,s=t.emailOrUsername,c=t.email,u=t.username,f=t.phoneNumber,d=t.redirect;try{return o.resolve(Ge(function(){return o.resolve(le("/auth/totp",{totpCode:r,backupCode:n,userId:a,userUuid:i,emailOrUsername:s,email:c,username:u,phoneNumber:f,tenantId:ne.tenantId},{headers:Ie(),params:Re()})).then(function(e){var t,r=e.data;function n(e){if(t)return e;if(r.hasOwnProperty("firstFactorToken"))return xe(r),r;if(r.authorizationCode){var n=d||r.redirectTo;if(n)return void Ae(n,r.authorizationCode);throw new Error("Received a PKCE (mobile auth) response from the server, but no redirect was provided. Please set the redirect to the app that initiated the request.")}throw new Error("Problem logging in.")}var a=function(){if(r.hasOwnProperty("tokens"))return Pe(),we(r.tokens),o.resolve(ye()).then(function(){return Be({redirect:d,data:r}),t=1,r})}();return a&&a.then?a.then(n):n(a)})},function(e){se(e)}))}catch(e){return o.reject(e)}}({totpCode:h,backupCode:p,userId:n,userUuid:a,emailOrUsername:c,email:i,username:s,phoneNumber:u,redirect:w}));case"verificationCode":return o.resolve(function(e){var t=void 0===e?{}:e,r=t.channel,n=t.verificationCode,a=t.email,i=t.phoneNumber,s=t.redirect;try{return o.resolve(Ve(function(){return Xe({channel:r,phoneNumber:i,email:a}),o.resolve(de("/auth/code",{channel:r,verificationCode:n,email:a,phoneNumber:i,tenantId:ne.tenantId},{headers:Ie(),params:Re()})).then(function(e){var t,r=e.data;function n(e){if(t)return e;if(r.hasOwnProperty("firstFactorToken"))return xe(r),r;if(r.authorizationCode){var n=s||r.redirectTo;if(n)return void Ae(n,r.authorizationCode);throw new Error("Received a PKCE (mobile auth) response from the server, but no redirect was provided. Please set the redirect to the app that initiated the request.")}throw new Error("Problem logging in.")}var a=function(){if(r.hasOwnProperty("tokens"))return Pe(),we(r.tokens),o.resolve(ye()).then(function(){return Be({redirect:s,data:r}),t=1,r})}();return a&&a.then?a.then(n):n(a)})},function(e){se(e)}))}catch(e){return o.reject(e)}}({channel:v,email:i,phoneNumber:u,verificationCode:m,redirect:w}));case"saml":return o.resolve(function(){try{return o.resolve(function(e,t){try{var r=ne.tokens.accessToken?o.resolve(he("/auth/saml/idp/token",{headers:{authorization:"Bearer "+ne.tokens.accessToken}})).then(function(e){window.location.assign(ne.baseUrl+"auth/saml/idp/login?tenant_id="+ne.tenantId+"&token="+e.data.token+"&uuid="+ne.user.userUuid)}):console.warn("Cannot complete SAML login without access token")}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(0,function(e){se(e)}))}catch(e){return o.reject(e)}}());default:throw new Error('Userfront.login called with invalid "method" property.')}}catch(e){return o.reject(e)}},resetPassword:Je,updatePassword:Me,sendLoginLink:function(e){try{return o.resolve(Ke(function(){return o.resolve(le("/auth/link",{email:e,tenantId:ne.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},sendResetLink:function(e){try{return o.resolve(ze(function(){return o.resolve(le("/auth/reset/link",{email:e,tenantId:ne.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},sendVerificationCode:$e,signup:function(e){var t=void 0===e?{}:e,r=t.method,n=t.email,a=t.username,i=t.phoneNumber,s=t.name,c=t.data,u=t.password,f=t.channel,d=t.redirect;try{if(_e(),!r)throw new Error('Userfront.signup called without "method" property.');switch(r){case"apple":case"azure":case"facebook":case"github":case"google":case"linkedin":return o.resolve(He({provider:r,redirect:d}));case"password":return o.resolve(function(e){var t=void 0===e?{}:e,r=t.username,n=t.name,a=t.email,i=t.password,s=t.userData,c=t.redirect;try{return o.resolve(ze(function(){return o.resolve(le("/auth/create",{tenantId:ne.tenantId,username:r,name:n,email:a,password:i,data:s},{headers:Ie(),params:Re()})).then(function(e){var t=e.data;return function(){if(t.tokens)return Pe(),we(t.tokens),o.resolve(ye()).then(function(){return Be({redirect:c,data:t}),t});if(t.firstFactorToken)return xe(t),t;if(!t.authorizationCode)throw new Error("Please try again.");var e=c||t.redirectTo;if(!e)throw new Error("Received a PKCE (mobile auth) response from the server, but no redirect was provided. Please set the redirect to the app that initiated the request.");Ae(e,t.authorizationCode)}()})},function(e){se(e)}))}catch(e){return o.reject(e)}}({username:a,name:s,email:n,password:u,userData:c,redirect:d}));case"passwordless":return o.resolve(We({email:n,name:s,username:a,userData:c}));case"verificationCode":return o.resolve($e({channel:f,email:n,phoneNumber:i,name:s,username:a,data:c}));default:throw new Error('Userfront.signup called with invalid "method" property.')}}catch(e){return o.reject(e)}},store:ne,tokens:je,accessToken:function(){return ne.tokens.accessToken=oe.get(ne.tokens.accessTokenName),ne.tokens.accessToken},idToken:function(){return ne.tokens.idToken=oe.get(ne.tokens.idTokenName),ne.tokens.idToken},getSession:Se,redirectIfLoggedIn:function(e){var t=(void 0===e?{}:e).redirect;try{return o.resolve(Se()).then(function(e){if(!e.isLoggedIn)return me();if(!Ue.usePkce){if(t)return Le(t);if(Fe("redirect"))return Le(Fe("redirect"));var r=function(e,t){try{var r=o.resolve(he("/self",{headers:{authorization:"Bearer "+ne.tokens.accessToken}})).then(function(e){var t=e.data;t.tenant&&t.tenant.loginRedirectPath&&Le(t.tenant.loginRedirectPath)})}catch(e){return t()}return r&&r.then?r.then(void 0,t):r}(0,function(){me()});return r&&r.then?r.then(function(){}):void 0}})}catch(e){return o.reject(e)}},redirectIfLoggedOut:function(e){var t=(void 0===e?{}:e).redirect;try{return o.resolve(Se()).then(function(e){if(!e.isLoggedIn)return me(),t?Le(t):Fe("redirect")?Le(Fe("redirect")):void 0})}catch(e){return o.reject(e)}},user:ue};return at});
//# sourceMappingURL=userfront-core.ie11.umd.js.map
